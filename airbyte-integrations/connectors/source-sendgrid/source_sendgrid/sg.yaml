lists_stream:
  options:
    name: "lists"
    url_base: "https://api.sendgrid.com"
    schema_loader:
      file_path: "./source_sendgrid/schemas/{{options.name}}.yaml"
    retriever:
      paginator:
        type: "NextPageUrlPaginator"
        next_page_url: "._metadata.next"
        extract_from: "response"
      requester:
        path: "/v3/marketing/lists"
        authenticator:
          type: "TokenAuthenticator"
          token: "{{ config.apikey }}"
        request_parameters:
          page_size: 10
      extractor:
        transform: ".result[]"
        primary_key: id

streams:
  - "*ref(lists_stream)"
check:
  stream_names:
    - "lists"
