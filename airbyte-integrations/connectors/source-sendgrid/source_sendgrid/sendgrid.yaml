lists_stream:
  options:
    name: "lists"
    primary_key: id
    url_base: "https://api.sendgrid.com"
    schema_loader:
      file_path: "./source_sendgrid/schemas/{{options.name}}.json"
    retriever:
      requester:
        path: "/v3/marketing/lists"
        authenticator:
          type: "TokenAuthenticator"
          token: "{{ config.apikey }}"
      record_selector:
        extractor:
          transform: "_.result"

streams:
  - "*ref(lists_stream)"
check:
  stream_names:
    - "lists"
