
defaults:
  retry: &default-retry
    strategy: CUSTOM
    options:
      coordinate: connector.retry_strategy
      custom_options:
        arbitrary_value: 42
  auth: &default-auth
    strategy: OAUTH
    options:
      secret1: ${config.oauth.secret1}
      secret2: ${config.oauth.secret2}

config:
  # simple json/yaml schema

resources:
  name_1:
    request:
      strategy: http
      options:
        base_url: https://{config.account_id}.service.io/api/name_1
        method: GET # get could be the default but we expose it for POST type of queries
    decoder:
      strategy: JSON # XML, CUSTOM, CSV
      options:
    auth:
      strategy: API_KEY
      options:
        location: HEADER
        name: X-API-KEY
        value: ${config.api_key}
    pagination:
      strategy: NEXT_TOKEN
      options:
        location: ${previous_request.body.nextToken}
        end_value: null
    state:

      # strategy: CONDITION
      #   options:
      #     path: ${previous_request.body.hasMore}
      #     end_value: false
      # increment page and compare against size or empty
      # sql type iteration


    retry:
      strategy: EXPONENTIAL # EXPONENTIAL, FIBONACCI, FIXED, LINEAR, POLYNOMIAL, CUSTOM
      options:
        max_wait: 300
    schema:
      # simple json/yaml schema
      # default to json blob




